<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PaddleX-Studio</title>
    <style>
        #app .el-header {
            display: flex;
            align-items: center;
            padding: 0 20px;
            height: 60px;
            border-bottom: 1px solid #ebeef5;
        }

        #app .el-header .el-button {
            /* 未选中状态：白色背景、灰色文字、浅灰边框 */
            background: #ffffff;
            color: #606266;
            border: 1px solid #dcdfe6;
            min-width: 80px;
            margin-left: 20px;
        }

        #app .el-header .el-button.active {
            /* 选中状态：蓝色背景、白色文字、蓝色边框 */
            background: #409eff;
            color: #ffffff;
            border-color: #409eff;
        }
    </style>
    <!-- 引入Vue3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- 引入element-plus样式文件 -->
    <link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css" />
    <!-- 引入element-plus组件库 -->
    <script src="https://unpkg.com/element-plus"></script>
    <!-- 引入element-plus所有图标 -->
    <script src="https://unpkg.com/@element-plus/icons-vue"></script>
    <!-- 引入axios -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

</head>

<body>
    <div id="app">
        <el-container>
            <el-header>
                <h1 style="margin-right: 40px;color: #0047b9;">PaddleX Studio</h1>
                <el-button type="primary" :class="{ active: currentPage === 'model' }"  
                    @click="navigateTo('model')"><el-icon class="icon"><ICO_HelpFilled /></el-icon>模型</el-button>
                <el-button type="primary" :class="{ active: currentPage === 'dataset' }"
                    @click="navigateTo('dataset')"><el-icon class="icon"><ICO_Menu /></el-icon>数据</el-button>
            </el-header>
            <el-main>
                <!-- 模型列表页面 -->
                <div v-if="currentPage === 'model'">
                    <div class="model-header" style="margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center;">
                        <h2 style="font-size: 20px; color: #303133; margin: 0;">模型空间</h2>
                        <el-button type="primary" plain>创建模型</el-button>
                    </div>
                    <el-row :gutter="20">
                        <el-col :span="24">
                            <el-card class="model-card" v-for="(model, index) in models" :key="index" style="margin-bottom: 20px;">
                                <div class="card-content" style="display: flex; justify-content: space-between; padding: 0px;">
                                    <!-- 左侧内容 -->
                                    <div class="left-section" style="flex: 2; margin-right: 20px;">
                                        <div class="model-basic" style="display: flex; align-items: center; margin-top: 0; margin-bottom: 0;">
                                            <h3 style="font-size: 16px; margin-right: 12px;margin-top: 0; margin-bottom: 0;" v-text="model.name"></h3>
                                            <el-tag type="info" effect="plain" style="font-size: 14px;" v-text="model.pretrained_name"></el-tag>
                                        </div>
                                        <p class="model-desc" style="color: #909399; font-size: 14px; margin-bottom: 8px;" v-text="model.description"></p>
                                        <div class="model-category" style="margin-bottom: 8px; display: flex; align-items: center; gap: 8px;">
                                            <el-tag type="success" v-for="category in model.category" v-text="category"></el-tag>
                                        </div>
                                    </div>
                                    <!-- 右侧内容 -->
                                    <div class="right-section" style="flex: 1; text-align: right;">
                                        <p class="fine-tune-time" style="color: #606266; font-size: 14px; margin-bottom: 8px;" v-text="model.fine_tune_time"></p>
                                        <div class="model-status" style="margin-bottom: 8px;">
                                            <el-tag :type="model.status === 'success' ? 'success' : model.status === 'processing' ? 'info' : 'danger'" v-text="model.status"></el-tag>
                                        </div>
                                        <div class="info-actions">
                                            <el-button type="text">删除</el-button>
                                        </div>
                                    </div>
                                </div>
                            </el-card>
                        </el-col>
                    </el-row>
                </div>
                <!-- 数据集列表页面 -->
                <div v-if="currentPage ==='dataset'">
                    <div class="model-header" style="margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center;">
                        <h2 style="font-size: 20px; color: #303133; margin: 0;">数据集</h2>
                        <el-button type="primary" plain>创建数据集</el-button>
                    </div>                    
                    <el-row :gutter="20">
                        <el-col :span="24">
                            <el-card class="box-card" v-for="(dataset, index) in datasets" :key="index" style="margin-bottom: 20px;">
                                <div slot="header" class="clearfix">
                                    <span v-text="dataset.name"></span>
                                    <el-tag type="success" style="float: right;" v-text="dataset.category"></el-tag>
                                </div>
                                <p v-text="dataset.description"></p>
                                <el-button type="primary" size="small">操作</el-button>
                        </el-col>
                    </el-row>
                </div>
            </el-main>

        </el-container>
    </div>
    <script>
        const { createApp } = Vue
        const { ElMessage, ElIcon, Document, Folder, ElCard } = ElementPlus  // 新增导入ElCard组件
        createApp({
            data() {
                return {
                    currentPage: 'model',  // 默认显示模型列表页面
                    models: [],  // 初始化模型数组
                    datasets: []  // 新增数据集数组
                }
            },
            mounted() {
                // 页面加载后调用API获取模型数据
                fetch('/api/models')
                    .then(response => response.json())
                    .then(data => {
                        this.models = data;
                    })
                    .catch(error => {
                        console.error('获取模型数据失败:', error);
                    });
            },
            methods: {
                navigateTo(page) {
                    this.currentPage = page;
                    if (page === 'dataset') {
                        // 切换到数据集页面时调用API获取数据
                        fetch('/api/datasets')
                            .then(response => response.json())
                            .then(data => {
                                this.datasets = data;
                            })
                            .catch(error => {
                                console.error('获取数据集数据失败:', error);
                            });
                    }
                }
            },
            components: {
                ElIcon, Document, Folder, ElCard,  // 注册ElCard组件（已正确导入）
                'ico_helpfilled': ElementPlusIconsVue.HelpFilled,
                'ico_menu': ElementPlusIconsVue.Menu
            }
        }).use(ElementPlus).mount('#app')
    </script>
</body>

</html>