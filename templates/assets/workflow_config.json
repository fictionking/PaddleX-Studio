{
  "nodes": [
    {
      "id": "start",
      "type": "start",
      "data": {
        "name": "开始",
        "fixName": true,
        "params": {},
        "inputs": [],
        "outputs": ["input"]
      },
      "position": { "x": 0, "y": 0 }
    },
    {
      "id": "end",
      "type": "end",
      "data": {
        "name": "结束",
        "fixName": true,
        "params": {},
        "inputs": ["output"],
        "outputs": []
      },
      "position": { "x": 1000, "y": 0 }
    },
    {
      "id": "load_image",
      "type": "load_image",
      "data": {
        "name": "加载图像",
        "params": {},
        "inputs": ["files"],
        "outputs": ["images", "count"]
      },
      "position": { "x": 200, "y": 0 }
    },
    {
      "id": "object_detection",
      "type": "model",
      "data": {
        "name": "目标识别",
        "params": {
          "module_name": "object_detection",
          "model_name": "PP-YOLOE_plus-L",
          "model_dir": "weights\\PP-YOLOE_plus-L\\inference",
          "model_params": {
            "threshold": {
              "type": "number",
              "value": 0.5,
              "min": 0,
              "max": 1,
              "step": 0.1
            }
          },
          "infer_params": {
            "threshold": {
              "type": "number",
              "value": 0.5,
              "min": 0,
              "max": 1,
              "step": 0.1
            },
            "prompt": {
              "type": "text",
              "value": "识别所有物体"
            },
            "use_prompt": {
              "type": "bool",
              "value": false,
              "trueLabel": "使用",
              "falseLabel": "不使用"
            }
          }
        },
        "inputs": ["images"],
        "outputs": ["images", "boxes", "count"]
      },
      "position": { "x": 400, "y": 0 }
    },
    {
      "id": "image_classification",
      "type": "model",
      "data": {
        "name": "图像分类节点",
        "params": {
          "module_name": "image_classification",
          "model_name": "PP-HGNetV2-B6",
          "model_dir": "weights\\PP-HGNetV2-B6\\inference",
          "model_params": {
            "topk": {
              "type": "number",
              "value": 5,
              "min": 1,
              "max": 10,
              "step": 1
            }
          },
          "infer_params": {
            "topk": {
              "type": "number",
              "value": 1,
              "min": 1,
              "max": 10,
              "step": 1
            }
          }
        },
        "inputs": ["images"],
        "outputs": ["labels"]
      },
      "position": { "x": 700, "y": 0 }
    },
    {
      "id": "image_output",
      "type": "save_image",
      "data": {
        "name": "保存图像",
        "params": {
          "format": "png",
          "path": "output/images",
          "filename": "image"
        },
        "inputs": ["images"],
        "outputs": ["files"]
      },
      "position": { "x": 700, "y": 300 }
    },
    {
      "id": "topk_const",
      "type": "number_const",
      "data": {
        "name": "TopK",
        "params": {
          "value": 0
        },
        "inputs": [],
        "outputs": ["value"]
      },
      "position": { "x": 400, "y": 400 }
    }
  ],
  "edges": [
    {
      "id": "start_to_load_image",
      "source": "start",
      "target": "load_image",
      "sourceHandle": "outputs.input",
      "targetHandle": "inputs.files",
      "style": ".vue-flow"
    },
    {
      "id": "load_image_to_object_detection",
      "source": "load_image",
      "target": "object_detection",
      "sourceHandle": "outputs.images",
      "targetHandle": "inputs.images"
    },
    {
      "id": "object_detection_to_image_classification",
      "source": "object_detection",
      "target": "image_classification",
      "sourceHandle": "outputs.images",
      "targetHandle": "inputs.images"
    },
    {
      "id": "topk_const_to_image_classification",
      "source": "topk_const",
      "target": "image_classification",
      "sourceHandle": "outputs.value",
      "targetHandle": "params.infer_params.topk"
    },
    {
      "id": "object_detection_to_image_output",
      "source": "object_detection",
      "target": "image_output",
      "sourceHandle": "outputs.images",
      "targetHandle": "inputs.images"
    },
    {
      "id": "image_classification_to_end",
      "source": "image_classification",
      "target": "end",
      "sourceHandle": "outputs.labels",
      "targetHandle": "inputs.output"
    }
  ]
}