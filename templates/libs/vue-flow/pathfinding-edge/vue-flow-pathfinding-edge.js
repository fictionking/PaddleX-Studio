"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const k=require("vue"),E=require("@vue-flow/core");var wt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},R={},Nt={get exports(){return R},set exports(e){R=e}},j={},Wt={get exports(){return j},set exports(e){j=e}},me={},_t={get exports(){return me},set exports(e){me=e}};(function(e){(function(){var t,n,i,r,a,s,u,h,f,c,b,v,g,w,p;i=Math.floor,c=Math.min,n=function(o,l){return o<l?-1:o>l?1:0},f=function(o,l,d,m,y){var A;if(d==null&&(d=0),y==null&&(y=n),d<0)throw new Error("lo must be non-negative");for(m==null&&(m=o.length);d<m;)A=i((d+m)/2),y(l,o[A])<0?m=A:d=A+1;return[].splice.apply(o,[d,d-d].concat(l)),l},s=function(o,l,d){return d==null&&(d=n),o.push(l),w(o,0,o.length-1,d)},a=function(o,l){var d,m;return l==null&&(l=n),d=o.pop(),o.length?(m=o[0],o[0]=d,p(o,0,l)):m=d,m},h=function(o,l,d){var m;return d==null&&(d=n),m=o[0],o[0]=l,p(o,0,d),m},u=function(o,l,d){var m;return d==null&&(d=n),o.length&&d(o[0],l)<0&&(m=[o[0],l],l=m[0],o[0]=m[1],p(o,0,d)),l},r=function(o,l){var d,m,y,A,M,N;for(l==null&&(l=n),A=function(){N=[];for(var W=0,B=i(o.length/2);0<=B?W<B:W>B;0<=B?W++:W--)N.push(W);return N}.apply(this).reverse(),M=[],m=0,y=A.length;m<y;m++)d=A[m],M.push(p(o,d,l));return M},g=function(o,l,d){var m;if(d==null&&(d=n),m=o.indexOf(l),m!==-1)return w(o,0,m,d),p(o,m,d)},b=function(o,l,d){var m,y,A,M,N;if(d==null&&(d=n),y=o.slice(0,l),!y.length)return y;for(r(y,d),N=o.slice(l),A=0,M=N.length;A<M;A++)m=N[A],u(y,m,d);return y.sort(d).reverse()},v=function(o,l,d){var m,y,A,M,N,W,B,F,I;if(d==null&&(d=n),l*10<=o.length){if(A=o.slice(0,l).sort(d),!A.length)return A;for(y=A[A.length-1],B=o.slice(l),M=0,W=B.length;M<W;M++)m=B[M],d(m,y)<0&&(f(A,m,0,null,d),A.pop(),y=A[A.length-1]);return A}for(r(o,d),I=[],N=0,F=c(l,o.length);0<=F?N<F:N>F;0<=F?++N:--N)I.push(a(o,d));return I},w=function(o,l,d,m){var y,A,M;for(m==null&&(m=n),y=o[d];d>l;){if(M=d-1>>1,A=o[M],m(y,A)<0){o[d]=A,d=M;continue}break}return o[d]=y},p=function(o,l,d){var m,y,A,M,N;for(d==null&&(d=n),y=o.length,N=l,A=o[l],m=2*l+1;m<y;)M=m+1,M<y&&!(d(o[m],o[M])<0)&&(m=M),o[l]=o[m],l=m,m=2*l+1;return o[l]=A,w(o,N,l,d)},t=function(){o.push=s,o.pop=a,o.replace=h,o.pushpop=u,o.heapify=r,o.updateItem=g,o.nlargest=b,o.nsmallest=v;function o(l){this.cmp=l??n,this.nodes=[]}return o.prototype.push=function(l){return s(this.nodes,l,this.cmp)},o.prototype.pop=function(){return a(this.nodes,this.cmp)},o.prototype.peek=function(){return this.nodes[0]},o.prototype.contains=function(l){return this.nodes.indexOf(l)!==-1},o.prototype.replace=function(l){return h(this.nodes,l,this.cmp)},o.prototype.pushpop=function(l){return u(this.nodes,l,this.cmp)},o.prototype.heapify=function(){return r(this.nodes,this.cmp)},o.prototype.updateItem=function(l){return g(this.nodes,l,this.cmp)},o.prototype.clear=function(){return this.nodes=[]},o.prototype.empty=function(){return this.nodes.length===0},o.prototype.size=function(){return this.nodes.length},o.prototype.clone=function(){var l;return l=new o,l.nodes=this.nodes.slice(0),l},o.prototype.toArray=function(){return this.nodes.slice(0)},o.prototype.insert=o.prototype.push,o.prototype.top=o.prototype.peek,o.prototype.front=o.prototype.peek,o.prototype.has=o.prototype.contains,o.prototype.copy=o.prototype.clone,o}(),e!==null&&e.exports?e.exports=t:window.Heap=t}).call(wt)})(_t);(function(e){e.exports=me})(Wt);function Bt(e,t,n){this.x=e,this.y=t,this.walkable=n===void 0?!0:n}var ke=Bt,Ft={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4},$=Ft,qe=ke,T=$;function D(e,t,n){var i;typeof e!="object"?i=e:(t=e.length,i=e[0].length,n=e),this.width=i,this.height=t,this.nodes=this._buildNodes(i,t,n)}D.prototype._buildNodes=function(e,t,n){var i,r,a=new Array(t);for(i=0;i<t;++i)for(a[i]=new Array(e),r=0;r<e;++r)a[i][r]=new qe(r,i);if(n===void 0)return a;if(n.length!==t||n[0].length!==e)throw new Error("Matrix size does not fit");for(i=0;i<t;++i)for(r=0;r<e;++r)n[i][r]&&(a[i][r].walkable=!1);return a};D.prototype.getNodeAt=function(e,t){return this.nodes[t][e]};D.prototype.isWalkableAt=function(e,t){return this.isInside(e,t)&&this.nodes[t][e].walkable};D.prototype.isInside=function(e,t){return e>=0&&e<this.width&&t>=0&&t<this.height};D.prototype.setWalkableAt=function(e,t,n){this.nodes[t][e].walkable=n};D.prototype.getNeighbors=function(e,t){var n=e.x,i=e.y,r=[],a=!1,s=!1,u=!1,h=!1,f=!1,c=!1,b=!1,v=!1,g=this.nodes;if(this.isWalkableAt(n,i-1)&&(r.push(g[i-1][n]),a=!0),this.isWalkableAt(n+1,i)&&(r.push(g[i][n+1]),u=!0),this.isWalkableAt(n,i+1)&&(r.push(g[i+1][n]),f=!0),this.isWalkableAt(n-1,i)&&(r.push(g[i][n-1]),b=!0),t===T.Never)return r;if(t===T.OnlyWhenNoObstacles)s=b&&a,h=a&&u,c=u&&f,v=f&&b;else if(t===T.IfAtMostOneObstacle)s=b||a,h=a||u,c=u||f,v=f||b;else if(t===T.Always)s=!0,h=!0,c=!0,v=!0;else throw new Error("Incorrect value of diagonalMovement");return s&&this.isWalkableAt(n-1,i-1)&&r.push(g[i-1][n-1]),h&&this.isWalkableAt(n+1,i-1)&&r.push(g[i-1][n+1]),c&&this.isWalkableAt(n+1,i+1)&&r.push(g[i+1][n+1]),v&&this.isWalkableAt(n-1,i+1)&&r.push(g[i+1][n-1]),r};D.prototype.clone=function(){var e,t,n=this.width,i=this.height,r=this.nodes,a=new D(n,i),s=new Array(i);for(e=0;e<i;++e)for(s[e]=new Array(n),t=0;t<n;++t)s[e][t]=new qe(t,e,r[e][t].walkable);return a.nodes=s,a};var Pt=D,P={};function Ae(e){for(var t=[[e.x,e.y]];e.parent;)e=e.parent,t.push([e.x,e.y]);return t.reverse()}P.backtrace=Ae;function $t(e,t){var n=Ae(e),i=Ae(t);return n.concat(i.reverse())}P.biBacktrace=$t;function Dt(e){var t,n=0,i,r,a,s;for(t=1;t<e.length;++t)i=e[t-1],r=e[t],a=i[0]-r[0],s=i[1]-r[1],n+=Math.sqrt(a*a+s*s);return n}P.pathLength=Dt;function ye(e,t,n,i){var r=Math.abs,a=[],s,u,h,f,c,b;for(h=r(n-e),f=r(i-t),s=e<n?1:-1,u=t<i?1:-1,c=h-f;a.push([e,t]),!(e===n&&t===i);)b=2*c,b>-f&&(c=c-f,e=e+s),b<h&&(c=c+h,t=t+u);return a}P.interpolate=ye;function St(e){var t=[],n=e.length,i,r,a,s,u,h;if(n<2)return t;for(u=0;u<n-1;++u)for(i=e[u],r=e[u+1],a=ye(i[0],i[1],r[0],r[1]),s=a.length,h=0;h<s-1;++h)t.push(a[h]);return t.push(e[n-1]),t}P.expandPath=St;function Ot(e,t){var n=t.length,i=t[0][0],r=t[0][1],a=t[n-1][0],s=t[n-1][1],u,h,f,c,b,v,g,w,p,o,l;for(u=i,h=r,b=[[u,h]],v=2;v<n;++v){for(w=t[v],f=w[0],c=w[1],p=ye(u,h,f,c),l=!1,g=1;g<p.length;++g)if(o=p[g],!e.isWalkableAt(o[0],o[1])){l=!0;break}l&&(lastValidCoord=t[v-1],b.push(lastValidCoord),u=lastValidCoord[0],h=lastValidCoord[1])}return b.push([a,s]),b}P.smoothenPath=Ot;function Ct(e){if(e.length<3)return e;var t=[],n=e[0][0],i=e[0][1],r=e[1][0],a=e[1][1],s=r-n,u=a-i,h,f,c,b,v,g;for(v=Math.sqrt(s*s+u*u),s/=v,u/=v,t.push([n,i]),g=2;g<e.length;g++)h=r,f=a,c=s,b=u,r=e[g][0],a=e[g][1],s=r-h,u=a-f,v=Math.sqrt(s*s+u*u),s/=v,u/=v,(s!==c||u!==b)&&t.push([h,f]);return t.push([r,a]),t}P.compressPath=Ct;var G={manhattan:function(e,t){return e+t},euclidean:function(e,t){return Math.sqrt(e*e+t*t)},octile:function(e,t){var n=Math.SQRT2-1;return e<t?n*e+t:n*t+e},chebyshev:function(e,t){return Math.max(e,t)}},It=j,xt=P,ce=G,z=$;function Qe(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.heuristic=e.heuristic||ce.manhattan,this.weight=e.weight||1,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=z.OnlyWhenNoObstacles:this.diagonalMovement=z.IfAtMostOneObstacle:this.diagonalMovement=z.Never),this.diagonalMovement===z.Never?this.heuristic=e.heuristic||ce.manhattan:this.heuristic=e.heuristic||ce.octile}Qe.prototype.findPath=function(e,t,n,i,r){var a=new It(function(A,M){return A.f-M.f}),s=r.getNodeAt(e,t),u=r.getNodeAt(n,i),h=this.heuristic,f=this.diagonalMovement,c=this.weight,b=Math.abs,v=Math.SQRT2,g,w,p,o,l,d,m,y;for(s.g=0,s.f=0,a.push(s),s.opened=!0;!a.empty();){if(g=a.pop(),g.closed=!0,g===u)return xt.backtrace(u);for(w=r.getNeighbors(g,f),o=0,l=w.length;o<l;++o)p=w[o],!p.closed&&(d=p.x,m=p.y,y=g.g+(d-g.x===0||m-g.y===0?1:v),(!p.opened||y<p.g)&&(p.g=y,p.h=p.h||c*h(b(d-n),b(m-i)),p.f=p.g+p.h,p.parent=g,p.opened?a.updateItem(p):(a.push(p),p.opened=!0)))}return[]};var we=Qe,Ze=we;function te(e){Ze.call(this,e);var t=this.heuristic;this.heuristic=function(n,i){return t(n,i)*1e6}}te.prototype=new Ze;te.prototype.constructor=te;var Et=te,Rt=P,de=$;function Ke(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=de.OnlyWhenNoObstacles:this.diagonalMovement=de.IfAtMostOneObstacle:this.diagonalMovement=de.Never)}Ke.prototype.findPath=function(e,t,n,i,r){var a=[],s=this.diagonalMovement,u=r.getNodeAt(e,t),h=r.getNodeAt(n,i),f,c,b,v,g;for(a.push(u),u.opened=!0;a.length;){if(b=a.shift(),b.closed=!0,b===h)return Rt.backtrace(h);for(f=r.getNeighbors(b,s),v=0,g=f.length;v<g;++v)c=f[v],!(c.closed||c.opened)&&(a.push(c),c.opened=!0,c.parent=b)}return[]};var jt=Ke,et=we;function ie(e){et.call(this,e),this.heuristic=function(t,n){return 0}}ie.prototype=new et;ie.prototype.constructor=ie;var Jt=ie,Ye=j,Xe=P,pe=G,U=$;function tt(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.heuristic=e.heuristic||pe.manhattan,this.weight=e.weight||1,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=U.OnlyWhenNoObstacles:this.diagonalMovement=U.IfAtMostOneObstacle:this.diagonalMovement=U.Never),this.diagonalMovement===U.Never?this.heuristic=e.heuristic||pe.manhattan:this.heuristic=e.heuristic||pe.octile}tt.prototype.findPath=function(e,t,n,i,r){var a=function(B,F){return B.f-F.f},s=new Ye(a),u=new Ye(a),h=r.getNodeAt(e,t),f=r.getNodeAt(n,i),c=this.heuristic,b=this.diagonalMovement,v=this.weight,g=Math.abs,w=Math.SQRT2,p,o,l,d,m,y,A,M,N=1,W=2;for(h.g=0,h.f=0,s.push(h),h.opened=N,f.g=0,f.f=0,u.push(f),f.opened=W;!s.empty()&&!u.empty();){for(p=s.pop(),p.closed=!0,o=r.getNeighbors(p,b),d=0,m=o.length;d<m;++d)if(l=o[d],!l.closed){if(l.opened===W)return Xe.biBacktrace(p,l);y=l.x,A=l.y,M=p.g+(y-p.x===0||A-p.y===0?1:w),(!l.opened||M<l.g)&&(l.g=M,l.h=l.h||v*c(g(y-n),g(A-i)),l.f=l.g+l.h,l.parent=p,l.opened?s.updateItem(l):(s.push(l),l.opened=N))}for(p=u.pop(),p.closed=!0,o=r.getNeighbors(p,b),d=0,m=o.length;d<m;++d)if(l=o[d],!l.closed){if(l.opened===N)return Xe.biBacktrace(l,p);y=l.x,A=l.y,M=p.g+(y-p.x===0||A-p.y===0?1:w),(!l.opened||M<l.g)&&(l.g=M,l.h=l.h||v*c(g(y-e),g(A-t)),l.f=l.g+l.h,l.parent=p,l.opened?u.updateItem(l):(u.push(l),l.opened=W))}}return[]};var Ne=tt,it=Ne;function ne(e){it.call(this,e);var t=this.heuristic;this.heuristic=function(n,i){return t(n,i)*1e6}}ne.prototype=new it;ne.prototype.constructor=ne;var Lt=ne,Ge=P,ge=$;function nt(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=ge.OnlyWhenNoObstacles:this.diagonalMovement=ge.IfAtMostOneObstacle:this.diagonalMovement=ge.Never)}nt.prototype.findPath=function(e,t,n,i,r){var a=r.getNodeAt(e,t),s=r.getNodeAt(n,i),u=[],h=[],f,c,b,v=this.diagonalMovement,g=0,w=1,p,o;for(u.push(a),a.opened=!0,a.by=g,h.push(s),s.opened=!0,s.by=w;u.length&&h.length;){for(b=u.shift(),b.closed=!0,f=r.getNeighbors(b,v),p=0,o=f.length;p<o;++p)if(c=f[p],!c.closed){if(c.opened){if(c.by===w)return Ge.biBacktrace(b,c);continue}u.push(c),c.parent=b,c.opened=!0,c.by=g}for(b=h.shift(),b.closed=!0,f=r.getNeighbors(b,v),p=0,o=f.length;p<o;++p)if(c=f[p],!c.closed){if(c.opened){if(c.by===g)return Ge.biBacktrace(c,b);continue}h.push(c),c.parent=b,c.opened=!0,c.by=w}}return[]};var Ht=nt,rt=Ne;function re(e){rt.call(this,e),this.heuristic=function(t,n){return 0}}re.prototype=new rt;re.prototype.constructor=re;var Yt=re,be=G,Te=ke,V=$;function at(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.heuristic=e.heuristic||be.manhattan,this.weight=e.weight||1,this.trackRecursion=e.trackRecursion||!1,this.timeLimit=e.timeLimit||1/0,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=V.OnlyWhenNoObstacles:this.diagonalMovement=V.IfAtMostOneObstacle:this.diagonalMovement=V.Never),this.diagonalMovement===V.Never?this.heuristic=e.heuristic||be.manhattan:this.heuristic=e.heuristic||be.octile}at.prototype.findPath=function(e,t,n,i,r){var a=new Date().getTime(),s=function(p,o){return this.heuristic(Math.abs(o.x-p.x),Math.abs(o.y-p.y))}.bind(this),u=function(p,o){return p.x===o.x||p.y===o.y?1:Math.SQRT2},h=function(p,o,l,d,m){if(this.timeLimit>0&&new Date().getTime()-a>this.timeLimit*1e3)return 1/0;var y=o+s(p,c)*this.weight;if(y>l)return y;if(p==c)return d[m]=[p.x,p.y],p;var A,M,N,W,B=r.getNeighbors(p,this.diagonalMovement);for(N=0,A=1/0;W=B[N];++N){if(this.trackRecursion&&(W.retainCount=W.retainCount+1||1,W.tested!==!0&&(W.tested=!0)),M=h(W,o+u(p,W),l,d,m+1),M instanceof Te)return d[m]=[p.x,p.y],M;this.trackRecursion&&--W.retainCount===0&&(W.tested=!1),M<A&&(A=M)}return A}.bind(this),f=r.getNodeAt(e,t),c=r.getNodeAt(n,i),b=s(f,c),v,g,w;for(v=0;;++v){if(g=[],w=h(f,0,b,g,0),w===1/0)return[];if(w instanceof Te)return g;b=w}return[]};var Xt=at,Gt=j,ze=P,st=G;function We(e){e=e||{},this.heuristic=e.heuristic||st.manhattan,this.trackJumpRecursion=e.trackJumpRecursion||!1}We.prototype.findPath=function(e,t,n,i,r){var a=this.openList=new Gt(function(f,c){return f.f-c.f}),s=this.startNode=r.getNodeAt(e,t),u=this.endNode=r.getNodeAt(n,i),h;for(this.grid=r,s.g=0,s.f=0,a.push(s),s.opened=!0;!a.empty();){if(h=a.pop(),h.closed=!0,h===u)return ze.expandPath(ze.backtrace(u));this._identifySuccessors(h)}return[]};We.prototype._identifySuccessors=function(e){var t=this.grid,n=this.heuristic,i=this.openList,r=this.endNode.x,a=this.endNode.y,s,u,h,f,c,b=e.x,v=e.y,g,w,p,o,l,d=Math.abs;for(s=this._findNeighbors(e),f=0,c=s.length;f<c;++f)if(u=s[f],h=this._jump(u[0],u[1],b,v),h){if(g=h[0],w=h[1],l=t.getNodeAt(g,w),l.closed)continue;p=st.octile(d(g-b),d(w-v)),o=e.g+p,(!l.opened||o<l.g)&&(l.g=o,l.h=l.h||n(d(g-r),d(w-a)),l.f=l.g+l.h,l.parent=e,l.opened?i.updateItem(l):(i.push(l),l.opened=!0))}};var ae=We,ot=ae,Tt=$;function J(e){ot.call(this,e)}J.prototype=new ot;J.prototype.constructor=J;J.prototype._jump=function(e,t,n,i){var r=this.grid,a=e-n,s=t-i;if(!r.isWalkableAt(e,t))return null;if(this.trackJumpRecursion===!0&&(r.getNodeAt(e,t).tested=!0),r.getNodeAt(e,t)===this.endNode)return[e,t];if(a!==0){if(r.isWalkableAt(e,t-1)&&!r.isWalkableAt(e-a,t-1)||r.isWalkableAt(e,t+1)&&!r.isWalkableAt(e-a,t+1))return[e,t]}else if(s!==0){if(r.isWalkableAt(e-1,t)&&!r.isWalkableAt(e-1,t-s)||r.isWalkableAt(e+1,t)&&!r.isWalkableAt(e+1,t-s))return[e,t];if(this._jump(e+1,t,e,t)||this._jump(e-1,t,e,t))return[e,t]}else throw new Error("Only horizontal and vertical movements are allowed");return this._jump(e+a,t+s,e,t)};J.prototype._findNeighbors=function(e){var t=e.parent,n=e.x,i=e.y,r=this.grid,a,s,u,h,f=[],c,b,v,g;if(t)a=t.x,s=t.y,u=(n-a)/Math.max(Math.abs(n-a),1),h=(i-s)/Math.max(Math.abs(i-s),1),u!==0?(r.isWalkableAt(n,i-1)&&f.push([n,i-1]),r.isWalkableAt(n,i+1)&&f.push([n,i+1]),r.isWalkableAt(n+u,i)&&f.push([n+u,i])):h!==0&&(r.isWalkableAt(n-1,i)&&f.push([n-1,i]),r.isWalkableAt(n+1,i)&&f.push([n+1,i]),r.isWalkableAt(n,i+h)&&f.push([n,i+h]));else for(c=r.getNeighbors(e,Tt.Never),v=0,g=c.length;v<g;++v)b=c[v],f.push([b.x,b.y]);return f};var zt=J,lt=ae,Ut=$;function L(e){lt.call(this,e)}L.prototype=new lt;L.prototype.constructor=L;L.prototype._jump=function(e,t,n,i){var r=this.grid,a=e-n,s=t-i;if(!r.isWalkableAt(e,t))return null;if(this.trackJumpRecursion===!0&&(r.getNodeAt(e,t).tested=!0),r.getNodeAt(e,t)===this.endNode)return[e,t];if(a!==0&&s!==0){if(r.isWalkableAt(e-a,t+s)&&!r.isWalkableAt(e-a,t)||r.isWalkableAt(e+a,t-s)&&!r.isWalkableAt(e,t-s))return[e,t];if(this._jump(e+a,t,e,t)||this._jump(e,t+s,e,t))return[e,t]}else if(a!==0){if(r.isWalkableAt(e+a,t+1)&&!r.isWalkableAt(e,t+1)||r.isWalkableAt(e+a,t-1)&&!r.isWalkableAt(e,t-1))return[e,t]}else if(r.isWalkableAt(e+1,t+s)&&!r.isWalkableAt(e+1,t)||r.isWalkableAt(e-1,t+s)&&!r.isWalkableAt(e-1,t))return[e,t];return this._jump(e+a,t+s,e,t)};L.prototype._findNeighbors=function(e){var t=e.parent,n=e.x,i=e.y,r=this.grid,a,s,u,h,f=[],c,b,v,g;if(t)a=t.x,s=t.y,u=(n-a)/Math.max(Math.abs(n-a),1),h=(i-s)/Math.max(Math.abs(i-s),1),u!==0&&h!==0?(r.isWalkableAt(n,i+h)&&f.push([n,i+h]),r.isWalkableAt(n+u,i)&&f.push([n+u,i]),r.isWalkableAt(n+u,i+h)&&f.push([n+u,i+h]),r.isWalkableAt(n-u,i)||f.push([n-u,i+h]),r.isWalkableAt(n,i-h)||f.push([n+u,i-h])):u===0?(r.isWalkableAt(n,i+h)&&f.push([n,i+h]),r.isWalkableAt(n+1,i)||f.push([n+1,i+h]),r.isWalkableAt(n-1,i)||f.push([n-1,i+h])):(r.isWalkableAt(n+u,i)&&f.push([n+u,i]),r.isWalkableAt(n,i+1)||f.push([n+u,i+1]),r.isWalkableAt(n,i-1)||f.push([n+u,i-1]));else for(c=r.getNeighbors(e,Ut.Always),v=0,g=c.length;v<g;++v)b=c[v],f.push([b.x,b.y]);return f};var Vt=L,ut=ae,qt=$;function H(e){ut.call(this,e)}H.prototype=new ut;H.prototype.constructor=H;H.prototype._jump=function(e,t,n,i){var r=this.grid,a=e-n,s=t-i;if(!r.isWalkableAt(e,t))return null;if(this.trackJumpRecursion===!0&&(r.getNodeAt(e,t).tested=!0),r.getNodeAt(e,t)===this.endNode)return[e,t];if(a!==0&&s!==0){if(this._jump(e+a,t,e,t)||this._jump(e,t+s,e,t))return[e,t]}else if(a!==0){if(r.isWalkableAt(e,t-1)&&!r.isWalkableAt(e-a,t-1)||r.isWalkableAt(e,t+1)&&!r.isWalkableAt(e-a,t+1))return[e,t]}else if(s!==0&&(r.isWalkableAt(e-1,t)&&!r.isWalkableAt(e-1,t-s)||r.isWalkableAt(e+1,t)&&!r.isWalkableAt(e+1,t-s)))return[e,t];return r.isWalkableAt(e+a,t)&&r.isWalkableAt(e,t+s)?this._jump(e+a,t+s,e,t):null};H.prototype._findNeighbors=function(e){var t=e.parent,n=e.x,i=e.y,r=this.grid,a,s,u,h,f=[],c,b,v,g;if(t)if(a=t.x,s=t.y,u=(n-a)/Math.max(Math.abs(n-a),1),h=(i-s)/Math.max(Math.abs(i-s),1),u!==0&&h!==0)r.isWalkableAt(n,i+h)&&f.push([n,i+h]),r.isWalkableAt(n+u,i)&&f.push([n+u,i]),r.isWalkableAt(n,i+h)&&r.isWalkableAt(n+u,i)&&f.push([n+u,i+h]);else{var w;if(u!==0){w=r.isWalkableAt(n+u,i);var p=r.isWalkableAt(n,i+1),o=r.isWalkableAt(n,i-1);w&&(f.push([n+u,i]),p&&f.push([n+u,i+1]),o&&f.push([n+u,i-1])),p&&f.push([n,i+1]),o&&f.push([n,i-1])}else if(h!==0){w=r.isWalkableAt(n,i+h);var l=r.isWalkableAt(n+1,i),d=r.isWalkableAt(n-1,i);w&&(f.push([n,i+h]),l&&f.push([n+1,i+h]),d&&f.push([n-1,i+h])),l&&f.push([n+1,i]),d&&f.push([n-1,i])}}else for(c=r.getNeighbors(e,qt.OnlyWhenNoObstacles),v=0,g=c.length;v<g;++v)b=c[v],f.push([b.x,b.y]);return f};var Qt=H,ht=ae,Zt=$;function Y(e){ht.call(this,e)}Y.prototype=new ht;Y.prototype.constructor=Y;Y.prototype._jump=function(e,t,n,i){var r=this.grid,a=e-n,s=t-i;if(!r.isWalkableAt(e,t))return null;if(this.trackJumpRecursion===!0&&(r.getNodeAt(e,t).tested=!0),r.getNodeAt(e,t)===this.endNode)return[e,t];if(a!==0&&s!==0){if(r.isWalkableAt(e-a,t+s)&&!r.isWalkableAt(e-a,t)||r.isWalkableAt(e+a,t-s)&&!r.isWalkableAt(e,t-s))return[e,t];if(this._jump(e+a,t,e,t)||this._jump(e,t+s,e,t))return[e,t]}else if(a!==0){if(r.isWalkableAt(e+a,t+1)&&!r.isWalkableAt(e,t+1)||r.isWalkableAt(e+a,t-1)&&!r.isWalkableAt(e,t-1))return[e,t]}else if(r.isWalkableAt(e+1,t+s)&&!r.isWalkableAt(e+1,t)||r.isWalkableAt(e-1,t+s)&&!r.isWalkableAt(e-1,t))return[e,t];return r.isWalkableAt(e+a,t)||r.isWalkableAt(e,t+s)?this._jump(e+a,t+s,e,t):null};Y.prototype._findNeighbors=function(e){var t=e.parent,n=e.x,i=e.y,r=this.grid,a,s,u,h,f=[],c,b,v,g;if(t)a=t.x,s=t.y,u=(n-a)/Math.max(Math.abs(n-a),1),h=(i-s)/Math.max(Math.abs(i-s),1),u!==0&&h!==0?(r.isWalkableAt(n,i+h)&&f.push([n,i+h]),r.isWalkableAt(n+u,i)&&f.push([n+u,i]),(r.isWalkableAt(n,i+h)||r.isWalkableAt(n+u,i))&&f.push([n+u,i+h]),!r.isWalkableAt(n-u,i)&&r.isWalkableAt(n,i+h)&&f.push([n-u,i+h]),!r.isWalkableAt(n,i-h)&&r.isWalkableAt(n+u,i)&&f.push([n+u,i-h])):u===0?r.isWalkableAt(n,i+h)&&(f.push([n,i+h]),r.isWalkableAt(n+1,i)||f.push([n+1,i+h]),r.isWalkableAt(n-1,i)||f.push([n-1,i+h])):r.isWalkableAt(n+u,i)&&(f.push([n+u,i]),r.isWalkableAt(n,i+1)||f.push([n+u,i+1]),r.isWalkableAt(n,i-1)||f.push([n+u,i-1]));else for(c=r.getNeighbors(e,Zt.IfAtMostOneObstacle),v=0,g=c.length;v<g;++v)b=c[v],f.push([b.x,b.y]);return f};var Kt=Y,ve=$,ei=zt,ti=Vt,ii=Qt,ni=Kt;function ri(e){return e=e||{},e.diagonalMovement===ve.Never?new ei(e):e.diagonalMovement===ve.Always?new ti(e):e.diagonalMovement===ve.OnlyWhenNoObstacles?new ii(e):new ni(e)}var ai=ri,si={Heap:j,Node:ke,Grid:Pt,Util:P,DiagonalMovement:$,Heuristic:G,AStarFinder:we,BestFirstFinder:Et,BreadthFirstFinder:jt,DijkstraFinder:Jt,BiAStarFinder:Ne,BiBestFirstFinder:Lt,BiBreadthFirstFinder:Ht,BiDijkstraFinder:Yt,IDAStarFinder:Xt,JumpPointFinder:ai};(function(e){e.exports=si})(Nt);function Me(e,t){switch(t){case"top":return{x:e.x,y:e.y-1};case"bottom":return{x:e.x,y:e.y+1};case"left":return{x:e.x-1,y:e.y};case"right":return{x:e.x+1,y:e.y}}}function Ue(e,t,n){let i=e.getNodeAt(t.x,t.y);for(;!i.walkable;){e.setWalkableAt(i.x,i.y,!0);const r=Me(i,n);i=e.getNodeAt(r.x,r.y)}}const _=10;function q(e,t,n){let i=e.x/_,r=e.y/_,a=t/_,s=n/_;if(a<1)for(;a!==1;)a++,i++;else if(a>1)for(;a!==1;)a--,i--;if(s<1)for(;s!==1;)s++,r++;else if(s>1)for(;s!==1;)s--,r--;return{x:i,y:r}}function oi(e,t,n){let i=e.x*_,r=e.y*_,a=t,s=n;if(a<_)for(;a!==_;)a=a+_,i=i-_;else if(a>_)for(;a!==_;)a=a-_,i=i+_;if(s<_)for(;s!==_;)s=s+_,r=r-_;else if(s>_)for(;s!==_;)s=s-_,r=r+_;return{x:i,y:r}}function Q(e,t=10){return Math.round(e/t)*t}function Z(e,t=10){return Math.floor(e/t)*t}function K(e,t=10){return Math.ceil(e/t)*t}const C=10;function li(e,t,n,i){const{xMin:r,yMin:a,width:s,height:u}=e,h=s/C,f=u/C,c=new R.Grid(h,f);t.forEach(l=>{const d=q(l.topLeft,r,a),m=q(l.bottomRight,r,a);for(let y=d.x;y<m.x;y++)for(let A=d.y;A<m.y;A++)c.setWalkableAt(y,A,!1)});const b=q({x:Q(n.x,C),y:Q(n.y,C)},r,a),v=q({x:Q(i.x,C),y:Q(i.y,C)},r,a),g=c.getNodeAt(b.x,b.y);Ue(c,g,n.position);const w=c.getNodeAt(v.x,v.y);Ue(c,w,i.position);const p=Me(g,n.position),o=Me(w,i.position);return{grid:c,start:p,end:o}}function ui(e,t,n,i){const r=(e-n)/2+n,a=(t-i)/2+i;return[r,a]}function hi(e){let i=e[0];const r=e[0];let a=`M${r[0]},${r[1]}M`;for(let u=0;u<e.length;u++){const h=e[u],f=ui(i[0],i[1],h[0],h[1]);a+=` ${f[0]},${f[1]}`,a+=`Q${h[0]},${h[1]}`,i=h}const s=e[e.length-1];return a+=` ${s[0]},${s[1]}`,a}function fi(e,t,n){const i=[[e.x,e.y],...n,[t.x,t.y]];return hi(i)}function ci(e,t,n){const i=new R.AStarFinder({diagonalMovement:R.DiagonalMovement.Always,allowDiagonal:!0,dontCrossCorners:!0});let r=[];try{r=i.findPath(t.x,t.y,n.x,n.y,e),r=R.Util.smoothenPath(e,r)}catch{}return r}function di(e,t=0,n=0,i=0){t=Math.max(Math.round(t),0),n=Math.max(Math.round(n),0),i=Math.max(Math.round(i),0),t=Number.isInteger(t)?t:0,n=Number.isInteger(n)?n:0,i=Number.isInteger(i)?i:0;let r=Number.MIN_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER,u=Number.MAX_SAFE_INTEGER;const h=e.map(o=>{const{computedPosition:{x:l,y:d},dimensions:m}=o,y=Math.max(m.width||0,1),A=Math.max(m.height||0,1),M={x:l||0,y:d||0},N={x:M.x-t,y:M.y-t},W={x:M.x-t,y:M.y+A+t},B={x:M.x+y+t,y:M.y-t},F={x:M.x+y+t,y:M.y+A+t};return i>0&&(N.x=Z(N.x,i),N.y=Z(N.y,i),W.x=Z(W.x,i),W.y=K(W.y,i),B.x=K(B.x,i),B.y=Z(B.y,i),F.x=K(F.x,i),F.y=K(F.y,i)),N.y<u&&(u=N.y),N.x<s&&(s=N.x),F.y>a&&(a=F.y),F.x>r&&(r=F.x),{id:o.id,width:y,height:A,topLeft:N,bottomLeft:W,topRight:B,bottomRight:F}});r=r+n,a=a+n,s=s-n,u=u-n;const f={x:s,y:u},c={x:s,y:a},b={x:r,y:u},v={x:r,y:a},g=Math.abs(f.x-b.x),w=Math.abs(f.y-c.y);return{nodes:h,graph:{topLeft:f,bottomLeft:c,topRight:b,bottomRight:v,width:g,height:w,xMax:r,yMax:a,xMin:s,yMin:u}}}const pi=["d","marker-end","marker-start"],gi={name:"PathFindingEdge",compatConfig:{MODE:3},inheritAttrs:!1},bi=k.defineComponent({...gi,props:{id:null,source:null,target:null,sourceX:null,sourceY:null,targetX:null,targetY:null,selected:{type:Boolean,default:!1},animated:{type:Boolean},sourcePosition:{default:"bottom"},targetPosition:{default:"top"},label:null,labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:null,labelBgBorderRadius:null,style:null,markerEnd:null,markerStart:null,sourceHandleId:null,targetHandleId:null},setup(e){const t=e,n=10,i=20,r=C,{getNodes:a}=E.useVueFlow(),s=k.computed(()=>E.getSimpleBezierPath({...t})),u=k.computed(()=>({x:t.sourceX,y:t.sourceY,position:t.sourcePosition})),h=k.computed(()=>({x:t.targetX,y:t.targetY,position:t.targetPosition})),f=k.computed(()=>di(a.value,n,i,r)),c=k.computed(()=>{let g=[];if(h.value.x&&u.value.x&&a.value.length){const{grid:w,start:p,end:o}=li(f.value.graph,f.value.nodes,u.value,h.value);g=ci(w,p,o)}return g}),b=k.computed(()=>{var w;let g="";if((w=c.value)!=null&&w.length){const p=c.value.map(o=>{const[l,d]=o,m=oi({x:l,y:d},f.value.graph.xMin,f.value.graph.yMin);return[m.x,m.y]});g=fi(u.value,h.value,p)}return g}),v=k.useAttrs();return(g,w)=>k.unref(c)&&k.unref(c).length<=2?(k.openBlock(),k.createBlock(k.unref(E.BezierEdge),k.normalizeProps(k.mergeProps({key:0},{...t,...k.unref(v)})),null,16)):(k.openBlock(),k.createElementBlock(k.Fragment,{key:1},[k.createElementVNode("path",{style:k.normalizeStyle({...t.style,...k.unref(v).style}),class:"vue-flow__edge-path",d:k.unref(b),"marker-end":t.markerEnd,"marker-start":t.markerStart},null,12,pi),t.label?(k.openBlock(),k.createBlock(k.unref(E.EdgeText),{key:0,x:k.unref(s)[1],y:k.unref(s)[2],label:t.label,"label-style":t.labelStyle,"label-show-bg":t.labelShowBg,"label-bg-style":t.labelBgStyle,"label-bg-padding":t.labelBgPadding,"label-bg-border-radius":t.labelBgBorderRadius},null,8,["x","y","label","label-style","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius"])):k.createCommentVNode("",!0)],64))}});var vi=Math.PI;function mi(e,t,n,i){i===void 0&&(i=!1);var r=t[0],a=t[1],s=n[0],u=n[1],h=s+(e-r)/(a-r)*(u-s);if(i===!0)if(s<u){if(h<s)return s;if(h>u)return u}else{if(h>s)return s;if(h<u)return u}return h}function Ve(e,t,n,i,r){var a=Math.sin(r),s=Math.cos(r),u=e-n,h=t-i,f=u*s-h*a,c=u*a+h*s;return[f+n,c+i]}function Ai(e,t,n,i){return Math.hypot(i-t,n-e)}function X(e,t,n,i){return Math.atan2(i-t,n-e)}function ee(e,t,n,i){return[Math.cos(n)*i+e,Math.sin(n)*i+t]}function x(e,t,n,i,r){return r===void 0&&(r=.5),[e+(n-e)*r,t+(i-t)*r]}function Mi(e,t){return t===void 0&&(t=8),Math.floor(t*(.5+e/(vi*2)%t))}function ki(e,t,n,i){return Math.abs((n-e)/2/((i-t)/2))}function yi(e,t,n,i,r){r===void 0&&(r={});var a=r,s=a.bow,u=s===void 0?0:s,h=a.stretch,f=h===void 0?.5:h,c=a.stretchMin,b=c===void 0?0:c,v=a.stretchMax,g=v===void 0?420:v,w=a.padStart,p=w===void 0?0:w,o=a.padEnd,l=o===void 0?0:o,d=a.flip,m=d===void 0?!1:d,y=a.straights,A=y===void 0?!0:y,M=X(e,t,n,i),N=Ai(e,t,n,i),W=ki(e,t,n,i);if(N<(p+l)*2||u===0&&f===0||A&&[0,1,1/0].includes(W)){var B=Math.max(0,Math.min(N-p,p)),F=Math.max(0,Math.min(N-B,l)),I=ee(e,t,M,B),_e=I[0],Be=I[1],Fe=ee(n,i,M+Math.PI,F),Pe=Fe[0],$e=Fe[1],De=x(_e,Be,Pe,$e,.5),ft=De[0],ct=De[1];return[_e,Be,ft,ct,Pe,$e,M,M,M]}var Se=(Mi(M)%2===0?1:-1)*(m?-1:1),Oe=u+mi(N,[b,g],[1,0],!0)*f,Ce=x(e,t,n,i,.5),dt=Ce[0],pt=Ce[1],Ie=x(e,t,n,i,.5-Oe),S=Ie[0],O=Ie[1],xe=Ve(S,O,dt,pt,Math.PI/2*Se);S=xe[0],O=xe[1];var gt=X(e,t,S,O),Ee=ee(e,t,gt,p),se=Ee[0],oe=Ee[1],bt=X(n,i,S,O),Re=ee(n,i,bt,l),le=Re[0],ue=Re[1],vt=X(S,O,e,t),mt=X(S,O,n,i),je=x(se,oe,le,ue,.5),At=je[0],Mt=je[1],Je=x(se,oe,le,ue,.5-Oe),he=Je[0],fe=Je[1],Le=Ve(he,fe,At,Mt,Math.PI/2*Se);he=Le[0],fe=Le[1];var He=x(S,O,he,fe,.5),kt=He[0],yt=He[1];return[se,oe,kt,yt,le,ue,mt,vt,M]}const wi=["d","marker-end","marker-start"],Ni={name:"PerfectArrow",compatConfig:{MODE:3},inheritAttrs:!1},Wi=k.defineComponent({...Ni,props:{id:null,source:null,target:null,sourceX:null,sourceY:null,targetX:null,targetY:null,selected:{type:Boolean},animated:{type:Boolean},sourcePosition:null,targetPosition:null,label:null,labelStyle:null,labelShowBg:{type:Boolean},labelBgStyle:null,labelBgPadding:null,labelBgBorderRadius:null,style:null,markerEnd:null,markerStart:null,sourceHandleId:null,targetHandleId:null,options:{default:()=>({padStart:3,padEnd:3,stretch:.2})}},setup(e){const t=e,n=k.computed(()=>E.getSimpleBezierPath({...t})),i=k.computed(()=>yi(t.sourceX,t.sourceY,t.targetX,t.targetY,{...t.options})),r=k.useAttrs();return(a,s)=>(k.openBlock(),k.createElementBlock(k.Fragment,null,[k.createElementVNode("path",{style:k.normalizeStyle({...t.style,...k.unref(r).style}),class:"vue-flow__edge-path vue-flow__perfect-arrow",d:`M${k.unref(i)[0]},${k.unref(i)[1]} Q${k.unref(i)[2]},${k.unref(i)[3]} ${k.unref(i)[4]},${k.unref(i)[5]}`,"marker-end":t.markerEnd,"marker-start":t.markerStart},null,12,wi),t.label?(k.openBlock(),k.createBlock(k.unref(E.EdgeText),{key:0,x:k.unref(n)[1],y:k.unref(n)[2],label:t.label,"label-style":t.labelStyle,"label-show-bg":t.labelShowBg,"label-bg-style":t.labelBgStyle,"label-bg-padding":t.labelBgPadding,"label-bg-border-radius":t.labelBgBorderRadius},null,8,["x","y","label","label-style","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius"])):k.createCommentVNode("",!0)],64))}});exports.PathFindingEdge=bi;exports.PerfectArrow=Wi;
